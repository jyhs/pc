webpackJsonp([36],{1056:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-list-container"},[a("div",{staticClass:"detail-container"},[a("div",{staticClass:"table-container"},[a("el-card",{staticClass:"card-container"},[a("div",{staticClass:"card-header clear-fix",attrs:{slot:"header"},slot:"header"},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{attrs:{xs:24,sm:24,md:8,lg:8}},[a("div",{staticStyle:{"line-height":"36px"}},[a("el-icon",{staticClass:"el-icon-coral-list"}),t._v(" "),a("span",{staticClass:"card-title"},[t._v("明细列表")])],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:16,lg:16}},[a("el-form",{ref:"searchForm",staticClass:"clear",attrs:{model:t.searchForm}},[a("el-form-item",{staticClass:"left",attrs:{label:"按明细名查找","label-width":"100px"}},[a("el-input",{model:{value:t.searchForm.billDetailName,callback:function(e){t.$set(t.searchForm,"billDetailName",e)},expression:"searchForm.billDetailName"}})],1),t._v(" "),a("el-form-item",{staticClass:"left",staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"coral-refresh"},on:{click:t.handleReset}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"coral-add"},on:{click:t.handleAdd}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"coral-back"},on:{click:t.handleBack}},[t._v("返回")])],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",[t._v("明细名")]),t._v(" "),a("th",[t._v("尺寸")]),t._v(" "),a("th",[t._v("价格")]),t._v(" "),a("th",[t._v("积分")]),t._v(" "),a("th",[t._v("剩余数量")]),t._v(" "),a("th",[t._v("购买限额")]),t._v(" "),a("th",{staticClass:"action-th"},[t._v("操作")])])]),t._v(" "),a("tbody",t._l(t.billDetails,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.size))]),t._v(" "),a("td",[t._v(t._s(e.price))]),t._v(" "),a("td",[t._v(t._s(e.point))]),t._v(" "),a("td",[t._v(t._s(e.left_numbers))]),t._v(" "),a("td",[t._v(t._s(99===Number(e.limits)?"不限":e.limits))]),t._v(" "),a("td",{attrs:{align:"center"}},[a("el-button",{attrs:{title:"编辑",type:"primary",size:"small",icon:"edit"},on:{click:function(a){t.handleUpdate(e)}}}),t._v(" "),a("el-button",{attrs:{title:"删除",type:"primary",size:"small",icon:"delete"},on:{click:function(a){t.handleDelete(e)}}})],1)])}))])])])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",size:"tiny",visible:t.dialogVisible,"before-close":t.handleCancel},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("你确定删除明细"+t._s(t.currentRow.name)+"？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.handleCancel}},[t._v("取消")])],1)])],1)])},staticRenderFns:[]}},569:function(t,e,a){a(985);var i=a(223)(a(810),a(1056),null,null);t.exports=i.exports},810:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(58),n=a.n(i),r=a(57),l=a.n(r),o=a(99),s=a.n(o),c=a(224);e.default={data:function(){return{searchForm:{billDetailName:""},rules:{billDetailName:[{required:!0,message:"请填写查找的明细名",trigger:"blur"}]},billDetails:[],totalCount:0,currentRow:{},page:1,size:10,dialogVisible:!1}},computed:s()({},a.i(c.b)(["currentUser"])),created:function(){this.initData()},methods:s()({},a.i(c.c)(["loading","getDetailsByBillId","deleteDetailByIdAndUserIdAndBillId"]),{initData:function(t){var e=this;return l()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.$route.params.id,e.loading(!0),a.prev=2,a.next=5,e.getDetailsByBillId({id:i,name:t});case 5:e.billDetails=a.sent,e.totalCount=e.billDetails.length,a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),console.error(a.t0);case 12:e.loading(!1);case 13:case"end":return a.stop()}},a,e,[[2,9]])}))()},handleSearch:function(){var t=this;this.$refs.searchForm.validate(function(){var e=l()(n.a.mark(function e(a){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a&&t.initData(t.searchForm.billDetailName);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())},handleReset:function(){this.searchForm.billDetailName="",this.initData()},handleAdd:function(){var t=this.$route.params.id;this.$router.push({name:"detailAdd",params:{id:t}})},handleBack:function(){this.$router.push({name:"billList"})},handleSizeChange:function(t){this.size=t,this.initData(this.searchForm.billDetailName)},handleCurrentChange:function(t){this.page=t,this.initData(this.searchForm.billDetailName)},handleUpdate:function(t){this.$router.push({name:"detailEdit",params:{billId:this.$route.params.id,detailId:t.id}})},handleDelete:function(t){this.currentRow=t,this.dialogVisible=!0},handleCancel:function(){this.currentRow={},this.dialogVisible=!1},handleConfirm:function(){var t=this;return l()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dialogVisible=!1,t.loading(!0),a={},e.prev=3,e.next=6,t.deleteDetailByIdAndUserIdAndBillId({bill_detail_id:t.currentRow.id,bill_id:t.$route.params.id,user_id:t.currentUser.id});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:t.loading(!1),"ok"===a.status&&(t.$message({type:"success",message:"删除明细"+t.currentRow.name+"成功"}),t.initData());case 14:case"end":return e.stop()}},e,t,[[3,9]])}))()}}),watch:{$route:function(t){"detailList"===t.name&&this.initData()}}}},880:function(t,e,a){e=t.exports=a(556)(!1),e.push([t.i,".detail-list-container .detail-container{padding:20px}.detail-list-container .detail-container .card-container .el-card__header{padding:10px 20px}.detail-list-container .detail-container .card-container .el-card__body{padding:10px}.detail-list-container .detail-container .card-container .el-button{background:transparent;border:none}.detail-list-container .detail-container .card-container .el-button i,.detail-list-container .detail-container .card-container .el-button span{color:#20a0ff}.detail-list-container .detail-container .card-container .el-button:focus,.detail-list-container .detail-container .card-container .el-button:hover{background:#20a0ff}.detail-list-container .detail-container .card-container .el-button:focus i,.detail-list-container .detail-container .card-container .el-button:focus span,.detail-list-container .detail-container .card-container .el-button:hover i,.detail-list-container .detail-container .card-container .el-button:hover span{color:#fff}.detail-list-container .detail-container .card-container .el-button.is-disabled,.detail-list-container .detail-container .card-container .el-button.is-disabled:focus,.detail-list-container .detail-container .card-container .el-button.is-disabled:hover{background:transparent}.detail-list-container .detail-container .card-container .el-button.is-disabled:focus i,.detail-list-container .detail-container .card-container .el-button.is-disabled:focus span,.detail-list-container .detail-container .card-container .el-button.is-disabled:hover i,.detail-list-container .detail-container .card-container .el-button.is-disabled:hover span,.detail-list-container .detail-container .card-container .el-button.is-disabled i,.detail-list-container .detail-container .card-container .el-button.is-disabled span{color:#bfcbd9}.detail-list-container .detail-container .card-container .el-icon-coral-list{font-size:16px}.detail-list-container .detail-container .card-container .table .action-th{text-align:center}.detail-list-container .detail-container .card-container .card-header{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between}.detail-list-container .detail-container .card-container .card-header .card-title{line-height:36px;font-size:16px;font-weight:700}.detail-list-container .detail-container .card-container .card-header .el-form-item{margin-bottom:0}.detail-list-container .pagination{float:right;text-align:left;margin-top:10px}",""])},985:function(t,e,a){var i=a(880);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(557)("6a9e1226",i,!0)}});